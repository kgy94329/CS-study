### 캐시 메모리의 등장 배경
[[1.2 시스템의 하드웨어 조직]]의 입출력 예제를 보면 시스템이 정보를 한 곳에서 다른 곳으로 
이동시키는 일에 많은 시간을 보낸다. hello프로그램의 예제로 확인해보자.
1. hello프로그램의 인스트럭션들은 하드디스크에 저장되어 있다.
	*  "Hello, World" 데이터도 디스크에 저장되어 있다가 인스트럭션과 같이 복사된다.
2. 프로그램이 로딩 되면 인스트럭션들을 메인 메모리에 복사한다.
3. 프로세서가 프로그램을 실행할 때 인스트럭션들을 메인 메모리에서 프로세서로 복사한다.
	* "Hello, World" 데이터도 메모리로부터 레지스터 파일로 복사하고 디스플레이 장치로 
	  전송하여 화면에 글자들을 표시한다.

위와 같은 여러 복사 과정들이 프로그램의 실제 작업을 느리게 하는 **오버헤드**이고, 
시스템 설계자들의 주요 목적은 이러한 복사 과정들을 가능한 빠르게 동작하도록 하는 것이다.

>[용어] 오버헤드(Overhead)
>
	어떤 처리를 하기 위해 들어가는 간접적인 처리 시간, 메모리
	예를 들어 A라는 처리를 단순하게 실행한다면 10초 걸리는데, 안전성을 고려하고 
	부가적인 B라는 처리를 추가한 결과 처리시간이 15초 걸렸다면, 오버헤드는 5초가 된다. 
	또한 이 처리 B를 개선해 B'라는 처리를 한 결과, 처리시간이 12초가 되었다면, 
	이 경우 오버헤드가 3초 단축되었다고 말한다.
	<출처: 위키백과>

물리학의 법칙에 의해 큰 저장장치들은 작은 저장장치에 비해 느린 속도를 갖게 된다.
그리고 빠른 장치는 느린 장치를 만드는 것보다 더 많은 비용이 든다.
* 디스크 드라이브는 메인 메모리보다 크기가 크다
	* 프로세서가 디스크에서 1 워드의 데이터를 읽어들이는 시간은 
	  메모리에서 읽어들이는 시간 보다 천만 배 더 걸릴 수 있다.
* 레지스터 파일은 수백 바이트의 정보를 저장하지만 메인 메모리는 십억 개의 바이트를 저장한다.
	* 프로세서가 레지스터 파일의 데이터를 읽는 속도가 메모리의 데이터를 읽는 것보다 100배 더 빠르다
복사 과정을 줄이기 위해 레지스터를 크게 만들면 되겠지만 위의 물리 법칙에 의해 문제가 발생한다.
### 캐시 메모리 (Cache memory)
이처럼 프로세서와 메모리 간 격차를 좁히는 것이 관건인데 최근 반도체의 발전으로 격차가 지속적으로 증가하는 문제가 있어 이를 대응하기 위해 **캐시 메모리** 를 고안했다.
* 캐시 메모리란?
	* 프로세서가 단기간에 필요로 할 가능성이 높은 정보를 임시로 저장할 목적으로 
	  사용되는 메모리

![Cache Memory](/images/20240415134901.png)
캐시 시스템의 아이디어는 프로그램의 지역성)을 활용하는 것으로, 자주 액세스할 가능성이 높은 
데이터를 캐시가 보관하도록 설정하면 캐시를 이용하여 대부분의 메모리 작업을 수행할 수 있게된다. 즉, 캐시 메모리를 이해하는 응용 프로그래머는 캐시를 활용하여 자신의 프로그램 성능을 10배 이상 개선 시킬 수 있다는 것이고 다음과 같은 경우 캐시를 사용하는 것이 좋다.
1. 데이터 엑세스의 지역성(Locality)
	* 프로그램이나 알고리즘이 특정 데이터를 반복적으로 엑세스 하는 경우, 해당 데이터를 
	  캐시에 저장하면 반복적인 엑세스 시에 주 메모리까지 접근할 필요가 없어지므로 
	  성능 향상을 기대할 수 있다.
2. 데이터 엑세스 속도의 차이
	* 주 메모리와 비교하여 상대적으로 접근 시간이 빠른 캐시를 사용함으로써 
	  데이터 엑세스 속도를 향상 시킬 수 있다.
3. 데이터의 변경 주기가 빈번하지 않고, 단위 처리 시간이 오래 걸리는 경우
4. 데이터의 최신화가 반드시 실시간으로 이루어지지 않아도 서비스 품질에 거의 영향을 주지 않는 데이터

>[용어] 지역성(locality)
>
>	데이터 접근이 시간적 혹은 공간적으로 가깝게 일어나는 것.
>	캐시가 효율적으로 동작하기 위해서는 캐시가 저장할 데이터가 지역성을 가져야 한다.
>	* 시간적 지역성
>		* 특정 데이터가 한 번 접근 되었을 경우 가까운 미래에 또 한 번 데이터에 접근할 
>		  가능성이 높다.
>	* 공간적 지역성
>		* 액세스 된 기억장소와 인접한 기억 장소가 액세스 될 가능성이 높다.

#### 메모리 계층구조
![메모리 계층구조](/images/20240415143120.png)
* L0(레지스터 파일)
	* CPU코어에 내장된 가장 빠른 하드웨어
	* 제조사마다 다르지만 대개 32비트 혹은 64비트로 이루어져 있다.
* L1 cache (SRAM/Static Random Access Memory)
	* 대략 수십 킬로 바이트의 데이터를 저장
	* 거의 레지스터 파일만큼 빠른 속도로 액세스 할 수 있다.
* L2 cache
	* 수백 킬로 바이트에서 수 메가 바이트의 용량을 갖는다.
	* 프로세서와 전용 버스를 통해 연결된다.
* L3 cache
	* 수십 메가 바이트의 용량을 갖는다.
* 